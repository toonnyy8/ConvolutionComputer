<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <script src="./include.js"></script>
    <title>CComputer</title>
    <!-- Tocas UI：CSS 與元件 -->
    <link rel="stylesheet" href="./tocasUI/tocas.css" />
    <!-- Tocas JS：模塊與 JavaScript 函式 -->
    <script src="./tocasUI/tocas.js"></script>
</head>

<body style="background-color:#e4e4e4;">
    <font style="color:#cacaca;"></font>
    <div id="data" class="ts grid">
        <div class="sixteen wide column"></div>
        <div class="eleven wide column">
            <div id="X" class="ts narrow container"></div>
        </div>
        <div class="five wide column">
            <h1 v-on:click="X_tool=(X_tool==false)">
                X
            </h1>
            <div v-if="X_tool">
                <p>
                    <div class="ts buttons">
                        <button v-on:click="X_display=true; X_select=false; X_change=false; X_save=false; X_set=false;" class="ts primary button" v-bind:class="{active:X_display}">顯示</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="X_display=false; X_select=true; X_change=false; X_save=false; X_set=false;" class="ts positive button" v-bind:class="{active:X_select}">標記</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="X_display=false; X_select=false; X_change=false; X_save=true; X_set=false;" class="ts negative button" v-bind:class="{active:X_save}">儲存</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="X_display=false; X_select=false; X_change=false; X_save=false; X_set=true;" class="ts info button" v-bind:class="{active:X_set}">設定</button>
                    </div>
                </p>
                <p>
                    <div v-if="X_display==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="X_display_select=0" onclick="X_data.setView(data_view.X_F_energy, data_view.X_set_data.width, data_view.X_set_data.height, data_view.X_set_data.width_rate, 'X', colortrf(data_view.X_set_data.colorset));" class="ts button" v-bind:class="{active:X_display_select==0}">頻率響應 : 大小</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="X_display_select=1" onclick="X_data.setView(data_view.X_F_PhaseSngle, data_view.X_set_data.width, data_view.X_set_data.height, data_view.X_set_data.width_rate, 'X', colortrf(data_view.X_set_data.colorset));" class="ts button" v-bind:class="{active:X_display_select==1}">頻率響應 : 相位角</button>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="X_select==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="X_select_select=0" class="ts button" v-bind:class="{active:X_select_select==0}">數值標記</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="X_select_select=1" class="ts button" v-bind:class="{active:X_select_select==1}">位置標記</button>
                                <div class="or" data-text="or"></div>
                                <button class="ts button" onclick="X_data.reset_Mark();">清除標記</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="X_select_select==0">
                                <div class="ts action input">
                                    <input type="number" v-model="X_mark" placeholder="標記特定數值" />
                                    <button onclick="X_data.searchValue(data_view.X_mark);" class="ts button">標記</button>
                                </div>
                            </div>
                            <div v-else-if="X_select_select==1">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        <input type="number" v-model="X_mark_x1" min='0' placeholder="從x1" />
                                    </div>
                                    <div class="ts input">
                                        <input type="number" v-model="X_mark_x2" min='0' placeholder="到x2" />
                                        <button onclick="X_data.markSelect(data_view.X_mark_x1,data_view.X_mark_x2);" class="ts button">標記</button>
                                    </div>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="X_save==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="X_save_select=0" class="ts button" v-bind:class="{active:X_save_select==0}">數值</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="X_save_select=1" class="ts button" v-bind:class="{active:X_save_select==1}">圖片</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="X_save_select==0">
                                <div class="ts action input">
                                    <button onclick="CCmain.printFile(data_view.X_data);" class="ts button">確定儲存</button>
                                </div>
                            </div>
                            <div v-else-if="X_save_select==1">
                                <div class="ts action input">
                                    <button onclick="X_data.saveView();" class="ts button">確定儲存</button>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="X_set==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="X_set_select=0" class="ts button" v-bind:class="{active:X_set_select==0}">顏色</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="X_set_select=1" class="ts button" v-bind:class="{active:X_set_select==1}">大小</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="X_set_select=2" class="ts button" v-bind:class="{active:X_set_select==2}">操控</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="X_set_save();" class="ts button">儲存</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="X_set_select==0">
                                <div class="ts action input">
                                    <div class="ts grid">
                                        <div class="five wide column">
                                            背景:<input type="color" v-model="X_set_data.colorset.background" />
                                        </div>
                                        <div class="five wide column">
                                            &nbsp;X軸:<input type="color" v-model="X_set_data.colorset.X_axis" />
                                        </div>
                                        <div class="five wide column">
                                            &nbsp;Y軸:<input type="color" v-model="X_set_data.colorset.Y_axis" />
                                        </div>
                                        <div class="one wide column"></div>
                                        <div class="five wide column">
                                            資料:<input type="color" v-model="X_set_data.colorset.dataBar" />
                                        </div>
                                        <div class="five wide column">
                                            標記:<input type="color" v-model="X_set_data.colorset.mark" />
                                        </div>
                                        <div class="six wide column">
                                            <button onclick='updatedofX();' class="ts primary tiny button">應用</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-else-if="X_set_select==1">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        寬度:<input type="number" v-model="X_set_data.width" min='0' placeholder="顯示寬度" />
                                    </div>
                                    <div class="ts input">
                                        高度:<input type="number" v-model="X_set_data.height" min='0' placeholder="顯示高度" />
                                        <button onclick='updatedofX();' class="ts primary tiny button">應用</button>
                                    </div>
                                </div>
                            </div>
                            <div v-else-if="X_set_select==2">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        移動:<input type="number" v-model="X_set_shiftSpeed" min='0' placeholder="移動速度" />
                                        <button onclick='X_data.viewShift(X_data.viewShift(0));' class="ts primary tiny button">回到原點</button>
                                    </div>
                                    <div class="ts input">
                                        縮放:<input type="number" v-model="X_set_enlargeRate" min='0' placeholder="縮放倍率" />
                                    </div>
                                </div>
                            </div>
                        </p>
                    </div>
                </p>
            </div>
        </div>
        <div class="sixteen wide column"></div>
        <div class="eleven wide column">
            <div id="H" class="ts narrow container"></div>
        </div>
        <!--<div class="two wide column"></div>-->
        <div class="five wide column">
            <h1 v-on:click="H_tool=(H_tool==false)">
                H
            </h1>
            <div v-if="H_tool">
                <p>
                    <div class="ts buttons">
                        <button v-on:click="H_display=true; H_select=false; H_change=false; H_save=false; H_set=false;" class="ts primary button" v-bind:class="{active:H_display}">顯示</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="H_display=false; H_select=true; H_change=false; H_save=false; H_set=false;" class="ts positive button" v-bind:class="{active:H_select}">標記</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="H_display=false; H_select=false; H_change=false; H_save=true; H_set=false;" class="ts negative button" v-bind:class="{active:H_save}">儲存</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="H_display=false; H_select=false; H_change=false; H_save=false; H_set=true;" class="ts info button" v-bind:class="{active:H_set}">設定</button>
                    </div>
                </p>
                <p>
                    <div v-if="H_display==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="H_display_select=0" onclick="H_data.setView(data_view.H_F_energy, data_view.H_set_data.width, data_view.H_set_data.height, data_view.H_set_data.width_rate, 'H', colortrf(data_view.H_set_data.colorset));" class="ts button" v-bind:class="{active:H_display_select==0}">頻率響應 : 大小</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="H_display_select=1" onclick="H_data.setView(data_view.H_F_PhaseSngle, data_view.H_set_data.width, data_view.H_set_data.height, data_view.H_set_data.width_rate, 'H', colortrf(data_view.H_set_data.colorset));" class="ts button" v-bind:class="{active:H_display_select==1}">頻率響應 : 相位角</button>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="H_select==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="H_select_select=0" class="ts button" v-bind:class="{active:H_select_select==0}">數值標記</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="H_select_select=1" class="ts button" v-bind:class="{active:H_select_select==1}">位置標記</button>
                                <div class="or" data-text="or"></div>
                                <button class="ts button" onclick="H_data.reset_Mark();">清除標記</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="H_select_select==0">
                                <div class="ts action input">
                                    <input type="number" v-model="H_mark" placeholder="標記特定數值" />
                                    <button onclick="H_data.searchValue(data_view.H_mark);" class="ts button">標記</button>
                                </div>
                            </div>
                            <div v-else-if="H_select_select==1">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        <input type="number" v-model="H_mark_x1" min='0' placeholder="從x1" />
                                    </div>
                                    <div class="ts input">
                                        <input type="number" v-model="H_mark_x2" min='0' placeholder="到x2" />
                                        <button onclick="H_data.markSelect(data_view.H_mark_x1,data_view.H_mark_x2);" class="ts button">標記</button>
                                    </div>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="H_save==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="H_save_select=0" class="ts button" v-bind:class="{active:H_save_select==0}">數值</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="H_save_select=1" class="ts button" v-bind:class="{active:H_save_select==1}">圖片</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="H_save_select==0">
                                <div class="ts action input">
                                    <button onclick="CCmain.printFile(data_view.H_data);" class="ts button">確定儲存</button>
                                </div>
                            </div>
                            <div v-else-if="H_save_select==1">
                                <div class="ts action input">
                                    <button onclick="H_data.saveView();" class="ts button">確定儲存</button>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="H_set==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="H_set_select=0" class="ts button" v-bind:class="{active:H_set_select==0}">顏色</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="H_set_select=1" class="ts button" v-bind:class="{active:H_set_select==1}">大小</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="H_set_select=2" class="ts button" v-bind:class="{active:H_set_select==2}">操控</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="H_set_save();" class="ts button">儲存</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="H_set_select==0">
                                <div class="ts action input">
                                    <div class="ts grid">
                                        <div class="five wide column">
                                            背景:<input type="color" v-model="H_set_data.colorset.background" />
                                        </div>
                                        <div class="five wide column">
                                            &nbsp;X軸:<input type="color" v-model="H_set_data.colorset.X_axis" />
                                        </div>
                                        <div class="five wide column">
                                            &nbsp;Y軸:<input type="color" v-model="H_set_data.colorset.Y_axis" />
                                        </div>
                                        <div class="one wide column"></div>
                                        <div class="five wide column">
                                            資料:<input type="color" v-model="H_set_data.colorset.dataBar" />
                                        </div>
                                        <div class="five wide column">
                                            標記:<input type="color" v-model="H_set_data.colorset.mark" />
                                        </div>
                                        <div class="six wide column">
                                            <button onclick='updatedofH();' class="ts primary tiny button">應用</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-else-if="H_set_select==1">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        寬度:<input type="number" v-model="H_set_data.width" min='0' placeholder="顯示寬度" />
                                    </div>
                                    <div class="ts input">
                                        高度:<input type="number" v-model="H_set_data.height" min='0' placeholder="顯示高度" />
                                        <button onclick='updatedofH();' class="ts primary tiny button">應用</button>
                                    </div>

                                </div>
                            </div>
                            <div v-else-if="H_set_select==2">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        移動:<input type="number" v-model="H_set_shiftSpeed" min='0' placeholder="移動速度" />
                                        <button onclick='H_data.viewShift(H_data.viewShift(0));' class="ts primary tiny button">回到原點</button>
                                    </div>
                                    <div class="ts input">
                                        縮放:<input type="number" v-model="H_set_enlargeRate" min='0' placeholder="縮放倍率" />
                                    </div>

                                </div>
                            </div>
                        </p>
                    </div>
                </p>
            </div>
        </div>
        <div class="one wide column"></div>
        <div class="four wide column">
            <h1 v-on:click="Answer_tool=(Answer_tool==false)">
                Answer
            </h1>
            <div v-if="Answer_tool">
                <p>
                    <div class="ts buttons">
                        <button v-on:click="Answer_display=true; Answer_select=false; Answer_save=false; Answer_set=false;" class="ts primary button" v-bind:class="{active:Answer_display}">顯示</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="Answer_display=false; Answer_select=true; Answer_save=false; Answer_set=false;" class="ts positive button" v-bind:class="{active:Answer_select}">標記</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="Answer_display=false; Answer_select=false; Answer_save=true; Answer_set=false;" class="ts negative button" v-bind:class="{active:Answer_save}">儲存</button>
                        <div class="or" data-text="or"></div>
                        <button v-on:click="Answer_display=false; Answer_select=false;  Answer_save=false; Answer_set=true;" class="ts info button" v-bind:class="{active:Answer_set}">設定</button>
                        <div class="or" data-text="or"></div>
                        <button onclick="updated();" class="ts primary button">更新頻譜</button>
                    </div>
                </p>
                <p>
                    <div v-if="Answer_display==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="Answer_display_select=0" onclick="AnswerData.setView(data_view.Answer_F_energy, data_view.Answer_set_data.width, data_view.Answer_set_data.height, data_view.Answer_set_data.width_rate, 'Answer', colortrf(data_view.Answer_set_data.colorset));"
                                    class="ts button" v-bind:class="{active:Answer_display_select==0}">頻率響應 : 大小</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="Answer_display_select=1" onclick="AnswerData.setView(data_view.Answer_F_PhaseSngle, data_view.Answer_set_data.width, data_view.Answer_set_data.height, data_view.Answer_set_data.width_rate, 'Answer', colortrf(data_view.Answer_set_data.colorset));"
                                    class="ts button" v-bind:class="{active:Answer_display_select==1}">頻率響應 : 相位角</button>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="Answer_select==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="Answer_select_select=0" class="ts button" v-bind:class="{active:Answer_select_select==0}">數值標記</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="Answer_select_select=1" class="ts button" v-bind:class="{active:Answer_select_select==1}">位置標記</button>
                                <div class="or" data-text="or"></div>
                                <button class="ts button" onclick="AnswerData.reset_Mark();">清除標記</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="Answer_select_select==0">
                                <div class="ts action input">
                                    <input type="number" v-model="Answer_mark" placeholder="標記特定數值" />
                                    <button onclick="AnswerData.searchValue(data_view.Answer_mark);" class="ts button">標記</button>
                                </div>
                            </div>
                            <div v-else-if="Answer_select_select==1">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        <input type="number" v-model="Answer_mark_x1" min='0' placeholder="從x1" />
                                    </div>
                                    <div class="ts input">
                                        <input type="number" v-model="Answer_mark_x2" min='0' placeholder="到x2" />
                                        <button onclick="AnswerData.markSelect(data_view.Answer_mark_x1,data_view.Answer_mark_x2);" class="ts button">標記</button>
                                    </div>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="Answer_save==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="Answer_save_select=0" class="ts button" v-bind:class="{active:Answer_save_select==0}">數值</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="Answer_save_select=1" class="ts button" v-bind:class="{active:Answer_save_select==1}">圖片</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="Answer_save_select==0">
                                <div class="ts action input">
                                    <button onclick="CCmain.printFile(data_view.AnswerData);" class="ts button">確定儲存</button>
                                </div>
                            </div>
                            <div v-else-if="Answer_save_select==1">
                                <div class="ts action input">
                                    <button onclick="AnswerData.saveView();" class="ts button">確定儲存</button>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div v-else-if="Answer_set==true">
                        <p>
                            <div class="ts buttons">
                                <button v-on:click="Answer_set_select=0" class="ts button" v-bind:class="{active:Answer_set_select==0}">顏色</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="Answer_set_select=1" class="ts button" v-bind:class="{active:Answer_set_select==1}">大小</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="Answer_set_select=2" class="ts button" v-bind:class="{active:Answer_set_select==2}">操控</button>
                                <div class="or" data-text="or"></div>
                                <button v-on:click="Answer_set_save();" class="ts button">儲存</button>
                            </div>
                        </p>
                        <p>
                            <div v-if="Answer_set_select==0">
                                <div class="ts action input">
                                    <div class="ts grid">
                                        <div class="five wide column">
                                            背景:<input type="color" v-model="Answer_set_data.colorset.background" />
                                        </div>
                                        <div class="five wide column">
                                            &nbsp;X軸:<input type="color" v-model="Answer_set_data.colorset.X_axis" />
                                        </div>
                                        <div class="five wide column">
                                            &nbsp;Y軸:<input type="color" v-model="Answer_set_data.colorset.Y_axis" />
                                        </div>
                                        <div class="one wide column"></div>
                                        <div class="five wide column">
                                            資料:<input type="color" v-model="Answer_set_data.colorset.dataBar" />
                                        </div>
                                        <div class="five wide column">
                                            標記:<input type="color" v-model="Answer_set_data.colorset.mark" />
                                        </div>
                                        <div class="six wide column">
                                            <button onclick='updatedofAnswer();' class="ts primary tiny button">應用</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div v-else-if="Answer_set_select==1">
                                <div class="ts vertical inputs">
                                    <div class="ts input">
                                        寬度:<input type="number" v-model="Answer_set_data.width" min='0' placeholder="顯示寬度" />
                                    </div>
                                    <div style="white-space:nowrap;" class="ts input">
                                        高度:<input type="number" v-model="Answer_set_data.height" min='0' placeholder="顯示高度" />
                                        <button onclick='updatedofAnswer();' class="ts primary tiny button">應用</button>
                                    </div>
                                </div>
                            </div>
                            <div v-else-if="Answer_set_select==2">
                                <div class="ts vertical inputs">
                                    <div style="white-space:nowrap;" class="ts input">
                                        移動:<input type="number" v-model="Answer_set_shiftSpeed" min='0' placeholder="移動速度" />
                                        <button onclick='AnswerData.viewShift(AnswerData.viewShift(0));' class="ts primary tiny button">回到原點</button>
                                    </div>
                                    <div class="ts input">
                                        縮放:<input type="number" v-model="Answer_set_enlargeRate" min='0' placeholder="縮放倍率" />
                                    </div>
                                </div>
                            </div>
                        </p>
                    </div>
                </p>
            </div>
        </div>
        <div class="eleven wide column">
            <div id="Answer"></div>
        </div>
    </div>
</body>
<script>
    var data_view = new Vue({
        el: '#data',
        data: {
            X_data: null,
            X_F_energy: [],
            X_F_PhaseSngle: [],
            X_tool: true,
            /***/
            X_display: true,
            X_display_select: 0,
            X_path: null,
            /***/
            X_select: false,
            X_select_select: 0,
            X_mark: null,
            X_mark_value: null,
            X_mark_x1: null,
            X_mark_x2: null,
            /***/
            X_save: false,
            X_save_select: 0,
            /***/
            X_set: false,
            X_set_select: 0,
            X_set_select_color: 0,
            X_set_data: null,
            X_set_shiftSpeed: 1,
            X_set_enlargeRate: 2,

            /********/
            H_data: null,
            H_F_energy: [],
            H_F_PhaseSngle: [],
            H_tool: true,
            /***/
            H_display: true,
            H_display_select: 0,
            H_path: null,
            /***/
            H_select: false,
            H_select_select: 0,
            H_mark: null,
            H_mark_value: null,
            H_mark_x1: null,
            H_mark_x2: null,
            /***/
            H_save: false,
            H_save_select: 0,
            /***/
            H_set: false,
            H_set_select: 0,
            H_set_select_color: 0,
            H_set_data: null,
            H_set_shiftSpeed: 1,
            H_set_enlargeRate: 2,

            /********/
            AnswerData: null,
            Answer_F_energy: [],
            Answer_F_PhaseSngle: [],
            Answer_tool: true,
            /***/
            Answer_display: true,
            Answer_display_select: 0,
            /***/
            Answer_select: false,
            Answer_select_select: 0,
            Answer_mark: null,
            Answer_mark_value: null,
            Answer_mark_x1: null,
            Answer_mark_x2: null,
            /***/
            Answer_save: false,
            Answer_save_select: 0,
            /***/
            Answer_set: false,
            Answer_set_select: 0,
            Answer_set_select_color: 0,
            Answer_set_data: null,
            Answer_set_shiftSpeed: 1,
            Answer_set_enlargeRate: 2
        },
        methods: {
            X_set_save: function() {
                let __data__ = CCmain.readFile("./resources/app/set.json");
                __data__["X"] = data_view.X_set_data;
                fs.writeFile("./resources/app/set.json", JSON.stringify(__data__), (err) => {
                    if (err) throw err;
                    console.log('It\'s saved!');
                    alert('It\'s saved!');
                });
            },
            H_set_save: function() {
                let __data__ = CCmain.readFile("./resources/app/set.json");
                __data__["H"] = data_view.H_set_data;
                fs.writeFile("./resources/app/set.json", JSON.stringify(__data__), (err) => {
                    if (err) throw err;
                    console.log('It\'s saved!');
                    alert('It\'s saved!');
                });
            },
            Answer_set_save: function() {
                let __data__ = CCmain.readFile("./resources/app/set.json");
                __data__["Answer"] = data_view.Answer_set_data;
                fs.writeFile("./resources/app/set.json", JSON.stringify(__data__), (err) => {
                    if (err) throw err;
                    console.log('It\'s saved!');
                    alert('It\'s saved!');
                });

            }
        }
    });
    if (!fs.existsSync("./resources/app/set.json")) {
        fs.writeFile("./resources/app/set.json", `{
    "X": {
        "width": 800,
        "height": 250,
        "width_rate": 0.8,
        "colorset": {
            "background": "#000000",
            "X_axis": "#ff0040",
            "Y_axis": "#ff0040",
            "dataBar": "#00fff2",
            "mark": "#ff4444"
        }
    },
    "H": {
        "width": 800,
        "height": 250,
        "width_rate": 0.8,
        "colorset": {
            "background": "#000000",
            "X_axis": "#ff0040",
            "Y_axis": "#ff0040",
            "dataBar": "#00fff2",
            "mark": "#ff4444"
        }
    },
    "Answer": {
        "width": 800,
        "height": 250,
        "width_rate": 0.8,
        "colorset": {
            "background": "#000000",
            "X_axis": "#ff0040",
            "Y_axis": "#ff0040",
            "dataBar": "#00fff2",
            "mark": "#ff4444"
        }
    }
}`, (err) => {
            if (err) throw err;
        });
    };
    data_view.X_set_data = CCmain.readFile("./resources/app/set.json")["X"] || {};
    data_view.X_set_select_color = data_view.X_set_data.colorset.background;
    data_view.H_set_data = CCmain.readFile("./resources/app/set.json")["H"] || {};
    data_view.H_set_select_color = data_view.H_set_data.colorset.background;
    data_view.Answer_set_data = CCmain.readFile("./resources/app/set.json")["Answer"] || {};
    data_view.Answer_set_select_color = data_view.Answer_set_data.colorset.background;
    data_view.X_loader__();
    data_view.H_loader__();
</script>
<script>
    let colortrf = function(color_obj) {
        let temp = {};
        temp.background = "0x" + color_obj.background.split("#")[1];
        temp.X_axis = "0x" + color_obj.X_axis.split("#")[1];
        temp.Y_axis = "0x" + color_obj.Y_axis.split("#")[1];
        temp.dataBar = "0x" + color_obj.dataBar.split("#")[1];
        temp.mark = "0x" + color_obj.mark.split("#")[1];
        return temp;
    }
    let X_data;
    let H_data;
    let AnswerData;

    X_data = new CCmain.viewData(data_view.X_data, data_view.X_set_data.width, data_view.X_set_data.height, data_view.X_set_data.width_rate, "X", colortrf(data_view.X_set_data.colorset));
    H_data = new CCmain.viewData(data_view.H_data, data_view.H_set_data.width, data_view.H_set_data.height, data_view.H_set_data.width_rate, "H", colortrf(data_view.H_set_data.colorset));
    AnswerData = new CCmain.viewData(data_view.AnswerData, data_view.Answer_set_data.width, data_view.Answer_set_data.height, data_view.Answer_set_data.width_rate, "Answer", colortrf(data_view.Answer_set_data.colorset));

    keyboardJS.bind("a", function() {
        X_data.viewShift(-1 * data_view.X_set_shiftSpeed);
        H_data.viewShift(-1 * data_view.H_set_shiftSpeed);
        AnswerData.viewShift(-1 * data_view.Answer_set_shiftSpeed);
    });
    keyboardJS.bind("d", function() {
        X_data.viewShift(data_view.X_set_shiftSpeed);
        H_data.viewShift(data_view.H_set_shiftSpeed);
        AnswerData.viewShift(data_view.Answer_set_shiftSpeed);
    });
    keyboardJS.bind("w", function() {
        X_data.enlarge(data_view.X_set_enlargeRate);
        H_data.enlarge(data_view.H_set_enlargeRate);
        AnswerData.enlarge(data_view.Answer_set_enlargeRate);
    });
    keyboardJS.bind("s", function() {
        X_data.enlarge(1 / data_view.X_set_enlargeRate);
        H_data.enlarge(1 / data_view.H_set_enlargeRate);
        AnswerData.enlarge(1 / data_view.Answer_set_enlargeRate);
    });
    //CCmain.printFile(AnswerData);
</script>
<script>
    let updatedofX = function() {
        if (data_view.X_display_select == 0) {
            X_data.setView(data_view.X_F_energy, data_view.X_set_data.width, data_view.X_set_data.height, data_view.X_set_data.width_rate, 'X', colortrf(data_view.X_set_data.colorset));
        } else {
            X_data.setView(data_view.X_F_PhaseSngle, data_view.X_set_data.width, data_view.X_set_data.height, data_view.X_set_data.width_rate, 'X', colortrf(data_view.X_set_data.colorset));
        };
    }
    let updatedofH = function() {
        if (data_view.H_display_select == 0) {
            H_data.setView(data_view.H_F_energy, data_view.H_set_data.width, data_view.H_set_data.height, data_view.H_set_data.width_rate, 'H', colortrf(data_view.H_set_data.colorset));
        } else {
            H_data.setView(data_view.H_F_PhaseSngle, data_view.H_set_data.width, data_view.H_set_data.height, data_view.H_set_data.width_rate, 'H', colortrf(data_view.H_set_data.colorset));
        };
    }
    let updatedofAnswer = function() {
        if (data_view.Answer_display_select == 0) {
            AnswerData.setView(data_view.Answer_F_energy, data_view.Answer_set_data.width, data_view.Answer_set_data.height, data_view.Answer_set_data.width_rate, 'Answer', colortrf(data_view.Answer_set_data.colorset));
        } else {
            AnswerData.setView(data_view.Answer_F_PhaseSngle, data_view.Answer_set_data.width, data_view.Answer_set_data.height, data_view.Answer_set_data.width_rate, 'Answer', colortrf(data_view.Answer_set_data.colorset));
        };
    }

    let fr = new BroadcastChannel('FrequencyResponse');
    let updated = function() {
        fr.postMessage("ready");
        fr.onmessage = function(ev) {
            let temp = JSON.parse(ev.data)
            data_view.X_data = null;
            data_view.X_F_energy = [];
            data_view.X_F_PhaseSngle = [];
            data_view.X_data = temp["X_data"];
            for (let i = 0; data_view.X_data.length > Math.pow(2, i);) {
                i++
                if (data_view.X_data.length < Math.pow(2, i)) {
                    for (let j = data_view.X_data.length; j < Math.pow(2, i); j++) {
                        data_view.X_data[j] = 0;
                    }
                }
            }
            data_view.X_data = FFT.fft(data_view.X_data)
            for (let i = 0; i < data_view.X_data.length; i++) {
                data_view.X_F_energy[i] = Math.sqrt(Math.pow(data_view.X_data[i][0], 2) + Math.pow(data_view.X_data[i][1], 2));
                data_view.X_F_PhaseSngle[i] = Math.atan(data_view.X_data[i][1] / data_view.X_data[i][0]);
            }
            updatedofX();

            data_view.H_data = null;
            data_view.H_F_energy = [];
            data_view.H_F_PhaseSngle = [];
            data_view.H_data = temp["H_data"];
            for (let i = 0; data_view.H_data.length > Math.pow(2, i);) {
                i++
                if (data_view.H_data.length < Math.pow(2, i)) {
                    for (let j = data_view.H_data.length; j < Math.pow(2, i); j++) {
                        data_view.H_data[j] = 0;
                    }
                }
            }
            data_view.H_data = FFT.fft(data_view.H_data)
            for (let i = 0; i < data_view.H_data.length; i++) {
                data_view.H_F_energy[i] = Math.sqrt(Math.pow(data_view.H_data[i][0], 2) + Math.pow(data_view.H_data[i][1], 2));
                data_view.H_F_PhaseSngle[i] = Math.atan(data_view.H_data[i][1] / data_view.H_data[i][0]);
            }
            updatedofH();

            data_view.AnswerData = null;
            data_view.Answer_F_energy = [];
            data_view.Answer_F_PhaseSngle = [];
            data_view.AnswerData = temp["AnswerData"];
            for (let i = 0; data_view.AnswerData.length > Math.pow(2, i);) {
                i++
                if (data_view.AnswerData.length < Math.pow(2, i)) {
                    for (let j = data_view.AnswerData.length; j < Math.pow(2, i); j++) {
                        data_view.AnswerData[j] = 0;
                    }
                }
            }
            data_view.AnswerData = FFT.fft(data_view.AnswerData)
            for (let i = 0; i < data_view.AnswerData.length; i++) {
                data_view.Answer_F_energy[i] = Math.sqrt(Math.pow(data_view.AnswerData[i][0], 2) + Math.pow(data_view.AnswerData[i][1], 2));
                data_view.Answer_F_PhaseSngle[i] = Math.atan(data_view.AnswerData[i][1] / data_view.AnswerData[i][0]);
            }
            updatedofAnswer();

            fr.onmessage = null;
        };
    };
    updated();
</script>
<script>
</script>
<script>
    keyboardJS.bind("esc", function() {
        window.location.href = "./start.html";
    });
</script>

</html>